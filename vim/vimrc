"#========================#"
"# vimrc file for niblock #"
"#========================#"

" Type :so % to refresh .vimrc after making changes

"######
"# General Settings
"##

" Be IMproved ( Why? https://goo.gl/2RiJoo )
set nocompatible

" Necessary for Syntax hilighting and cool stuff
syntax on
filetype plugin indent on
set encoding=utf-8

" Auto-reload files changed outside Vim
set autoread

" Enable persistent undo
set undofile

" Shows you which commands you're typing
set showcmd

" Enable line numbers
set number

" Indendation modifications
" Auto indent; set spacing; use spaces
set autoindent
set expandtab
set smarttab
set tabstop=4
set shiftwidth=4
set softtabstop=4

" File-Type Specifics
augroup customfiletypes
     " Clear old autocmds in group
     autocmd!
     " Set auto-indent to two spaces, always expand tabs
     autocmd FileType ruby,eruby,yaml set sw=2 sts=2
augroup END

" Spacing
" Set width; word wrap; scroll mods
set scrolloff=5
set textwidth=80
set winwidth=80
set wrap

" Folding
" Enable folding; map fold-toggle to space when applicable
set foldmethod=syntax
nnoremap <silent> <Space> @=(foldlevel('.')?'za':"\<Space>")<CR>
vnoremap <Space> zf

" Enable auto-completion for vim commands
" :help wildmode and :help wildmenu for details
set wildmenu
set wildmode:longest:full,full

" Search modifications
" Incremental search; search hilighting
set ignorecase smartcase
set incsearch
set hlsearch

" Set default/backup colorscheme
" colorscheme desert

" Spelling, but only on by default for certain files
augroup spellcheckr
    autocmd BufNewFile,BufRead *.md setlocal spell
    autocmd BufNewFile,BufRead *.rdoc setlocal spell
    autocmd BufNewFile,BufRead *.txt setlocal spell
    autocmd BufNewFile,BufRead *.wiki setlocal spell
augroup END

"######
"# Mappings
"##
"

" Map Leader key
let mapleader = ","

" Make moving up/down work on wrapped lines of text
nnoremap <silent> j gj
nnoremap <silent> k gk
nnoremap <silent> ^ g^
nnoremap <silent> $ g$

" Move between splits with CTRL+h/j/k/l
nnoremap <silent> <C-l> <C-w>l
nnoremap <silent> <C-k> <C-w>k
nnoremap <silent> <C-j> <C-w>j
nnoremap <silent> <C-h> <C-w>h

" Allow saving of files as sudo when I forgot to start vim using sudo.
cmap w!! w !sudo tee > /dev/null %

" Remap ESC in insert mode
inoremap jk <esc>

" Remove Trailing Whitespaace
nnoremap <silent> <leader>rtw :%s/\s\+$//e<CR>

" Easy mapping for Startify
nnoremap <silent> <leader>s :Startify<CR>

" Open help topics in a full new tab
command! -nargs=1 -complete=help H :tabnew | :set buftype=help | :h <args>

" Show buffer list and prompt to choose one
nnoremap <leader>b :ls<CR>:b<space>

"######
"# Plugins
"###

" New Way: Vim-Plug, add-ons configured in .vimrc-plugins
     if filereadable(expand("~/.vimrc-plugins"))
          source ~/.vimrc-plugins
     endif
